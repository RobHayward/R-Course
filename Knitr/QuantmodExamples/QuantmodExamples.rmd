---
output: 
  html_document: 
    theme: united
---
Quantmod examples
========================================================
There are a large number of packages that have been produced by other people.  These packages hold additional functions that allow you to easily accomplish a range of tasks.  You must ``install`` the package to your machine.  You use the function ``install.packages`` to do that.  This will save all the functions in a directory.  You must then ``require`` the package to make the functions available for a particular session. 

We will look at the ``quantmod`` package. You can read all about the package on ``Cran``.  

The first step is to automatically download data from Yahoo finance using the function ``getSymbols``.  This will send a request to the Yahoo web site and bring back the data.  If it does not get a response within a specific time frame, an error is displayed.  In that case, try again. 

Once the data is downloaded, take a look at the data using the ``head`` and ``tail`` functions. 

```{r, message=FALSE, warning=FALSE,cache=TRUE}
#install.packages('quantmod')
require(quantmod)
getSymbols("BAC")
head(BAC)
tail(BAC)
```
	
You can take a look at the other functions in the ``quantmod`` package by running ``?quantmod`` at the consol or pressing F1 when the cursor is over the word ``quantmod`` in RStudio. 

```{r, message=FALSE, warnings=FALSE,cache=TRUE}
head(Ad(BAC))
?quantmod
?OHLC
```
There are a number of built in plotting functions. 
```{r, fig.hight=4, warning=FALSE, message=FALSE, cache=TRUE}
require(quantmod)
plot(Cl(BAC), col = 'black')
barChart(BAC)

```

**Practice**

* Automatically download the data for the Ford Motor Company from Yahoo
* Check that the data is okay and find out the start and end dates
* Create a plot of the data



###Technical trading
The ``ttr`` package is installed and loaded as part of ``quantmod``

```{r, cache=TRUE, message=FALSE, warning=FALSE}
require(TTR)
require(quantmod)
getSymbols("GOOG")
barChart(GOOG)
candleChart(GOOG,multi.col=TRUE,theme='white', subset = 'last 4 months')
chartSeries(GOOG)
addMACD()
addBBands()
```

**Practice**

* Check the functions that are available in ``TTR`` package
* Create a 5-day moving average of YHOO and call it ``YHOO5DMA``` 
* Plot the Yahoo 5-day moving average. 


###The Fred database
One of the sources is the Fred database.  Here we get the data and chart it in different ways. 
```{r, cache=TRUE, message=FALSE, warning=FALSE}
getSymbols('CPIAUCNS',src='FRED')
plot(CPIAUCNS)
plot(diff(log(CPIAUCNS), lag=12), main="CPI Inflation")
```

```{r, cache=TRUE, message=FALSE, warning=FALSE}
getSymbols('DEXJPUS',src="FRED") # FX rates from FRED
  plot(DEXJPUS, col = 'black', main = "USD-JPY")
```

**Practice**

* Go to the St. Louis Fed database
* Find the code for US unemployment data
* Plot the data and beautify the chart
