---
title: "First R"
output: 
  html_document: 
    theme: united
---
# Introduction

All the regular mathematical operations can be carried out.  The usual signals and hierarchies are used. 

```{r, eval=FALSE}

4 + 5
4 * 5
4 / 5
4^5

sqrt(5)
log(5)

test <- 2*3
test

test = 2/3
test
```

### **Practice**

* Calculate the average of 2, 5, 6, 8, 9, 15, 1, 3
* Calculate the difference between 10405 10222 as a percentage change


# Objects
----------------------------------------------------------
R uses objects. The main objects are:

* numeric
* character
* logical 
* vector
* data frame


When things go wrong, it is often the case that you are to something impossible with that object.  For example, adding up characters. 


# Character
For an example of character
```{r}
a <- "My name"
a
```

### **Practice**

* Assign you first and last name to the objects ``a`` and ``b``
* Add ``a`` to ``b``

# Logical (boolean,  true or false)
```{r}
1 == 1

1 == 2 

1 & 2 == 1

1 | 2 == 1

1 > 2

1 < 2
```



# Vectors and matrices
-----------------------------------------------------
Strings or numerics can be concatenated or combined to form a vector or matrix
```{r}  
mynumbers <- c(3,5,6,7,9)
mynumbers
mynumbers <- c(1:10)
mynumbers
```
To create a sequence, use the command sequence
```{r}
a <- seq(0.5,2.5, length=100)
a
b <- seq(1,10,1)
b
mynumbers <- 1:12
m <-matrix(mynumbers, nrow=4)
m
```

Extract elements from the matrix by using ``[x, y]`` where x is the row and y is the column. Therefore ``m[1, 1]`` would be the top left hand corner.  ``m[ , 1]`` will select all the first column, ``m[2, ]`` will select all the second row. 

# Data frames

Matrices can only contain one type of object. Data-frames can group together vectors or various class.  These will be the most useful for us as we want time series with dates and integers. 

Individual components of a vector, matrix or data.frame can be identifies by using square brackets and a pair of numbers with the first equal to the row and the second equal to column.  You only need the first number for a vector. 

```{r}
Students <- c('Rob', 'James', 'Sam', 'Jane')
Marks <- c(20, 45, 65, 52)
myclass <- data.frame(Students, Marks)
myclass[, 1]
myclass[, 2]
mean(myclass[, 2])
```

It is also possible to subset columns by their name in a dataframe. Use the ``$`` after the dataframe name. 

```{r}
myclass$Students
myclass$Marks
myclass$Students == 'Rob'
myclass[myclass$Students == 'Rob', ]
myclass$Marks > 50
myclass$Marks > 50
myclass[myclass$Marks > 50, ]
```


### **Practice**

* Extract the marks for Jane
* Extract those marks that are below 50




# Plotting
--------------------------------------------------------
The plot function will allow you to create graphs with the data that you have.  Plotting is the best way to understand the data that you have. It will also identify if there are any errors.

The ``plot`` function will plot the data.  You need two series that match.  If you get an error it is frequently the case that they are of different length.  You can you add more lines by using the ``lines`` function.   Here we create two series and plot. 


```{r, fig.height=4}
x<-seq(1: 10)
y1<-x ^ 2
y2 <- 2 * x ^ 2
plot(x,y2)
lines(y1)
```

There are a number of parameters that can be used to customise the plot.  

* ``col``: colour, which will determine the colour of the lines
* ``lty``: line type, which will determine the type of plot, dashed or straight
* ``lwd``: line weight will determine the weight of the line
* ``legend``:  will create a legend (more below)
* ``main``: will provide a main heading
* ``xlab``:  will provide a label for the x axis
* ``ylab``: will provide a label for the y axis.


### **Practice**
Using the same x, y1 and y2 variables, see if you can create a plot with a heading and alternative labels for the x and y axis.  If you are adventurous you can change the colour, weight and type of lines. 

It is also possible to create histograms.  Here we use the ``rnorm`` function to create 100 normal random variables and then to calculate the mean and standard deviation of these series and use these as the basis for constructing a normal distribution using these values for the mean and standard deviation. 



```{r, fig.height=4}
z <- rnorm(100)
hist(z, prob=TRUE)
mu <- mean(z)
sig <-sd(z)
x <- seq(-4,4,length=500)
y <- dnorm(x,mu,sig)
lines(x,y, col='red')
```

# Input data
---------------------------------------------------------
By far the easiest way to input data is to read the data from a csv file.  There are packages for reading from excel and from other databases that we will look at later.  One you have the data you can check that it has been imported correctly by using the functions ``head`` and ``str``.    The second of these will tell you about the structure of the data. 

```{r}
da <- read.csv('../../Data/bac.csv')
head(da)
str(da)
```
It is important to make sure that the variables in the data.frame of of the correct class.  In this case, the ``Date`` series (first column) is a ``factor``.  We need to change it to date. Note that the function here is ``as.Date`` and that we need to specify the way that the date is presented.  

```{r}
da$Date <- as.Date(da$Date, format = "%d/%m/%Y")
str(da)
```

### **Practice**

* Go to Yahoo finance and download data for Ford (F) from January 2000 to December 2020
* Save the csv file to the desktop and import into R
* Plot the Closing price
* Beautify the plot.

